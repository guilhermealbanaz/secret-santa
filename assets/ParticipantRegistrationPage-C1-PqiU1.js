import{a as S,u as P,r as i,j as e}from"./index-CQCWOKf6.js";import{C as B,b as D,c as L,a as k,B as x}from"./button-BUwMC9nU.js";import{I as p}from"./input-Co6WA_Hk.js";import{D as A,P as R,a as I}from"./DrawFactory-9IjlckUi.js";import{f as q}from"./formatErrorMessage-BNLi1Z0a.js";import"./FirebaseService-1GMPh65x.js";function T(){const{id:l}=S(),h=P(),[n,f]=i.useState(""),[o,g]=i.useState(""),[c,d]=i.useState(!1),[m,a]=i.useState(null),[b,j]=i.useState(!1),w=()=>n.trim()?o.trim()?!0:(a("Email é obrigatório"),!1):(a("Nome é obrigatório"),!1),N=async r=>{var u;if(r.preventDefault(),!(!l||!w())){d(!0),a(null);try{const s=A.createRepository(),t=await s.findById(l);if(!t){a("Sorteio não encontrado");return}if((u=t.participants)!=null&&u.some(E=>E.email.toLowerCase()===o.toLowerCase())){a("Este email já está registrado");return}const y=R.create(n.trim(),o.trim().toLowerCase()),v=[...t.participants||[],y],C=new I(l,t.name,t.password,v,t.result,t.performed);await s.update(C),j(!0)}catch(s){console.error("Error registering participant:",s),a(q(s))}finally{d(!1)}}};return e.jsx("div",{className:"min-h-screen w-full bg-gradient-to-br from-[#0A0F1E] via-[#121A3A] to-[#0A0F1E] flex items-center justify-center p-8",children:e.jsxs("div",{className:"w-full max-w-md space-y-8",children:[e.jsxs("div",{className:"space-y-4 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-white",children:"Junte-se ao Sorteio"}),e.jsx("p",{className:"text-lg text-gray-400/80",children:"Preencha seus detalhes para participar"})]}),e.jsxs(B,{className:"bg-[#151B30]/50 border border-[#252B45] shadow-xl backdrop-blur-sm",children:[e.jsx(D,{children:e.jsx(L,{className:"text-2xl font-bold text-white",children:"Registro do Sorteio"})}),e.jsx(k,{children:b?e.jsxs("div",{className:"text-center space-y-4 py-6",children:[e.jsx("div",{className:"w-16 h-16 bg-green-500/10 text-green-500 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Registro Completo!"}),e.jsx("p",{className:"text-gray-400",children:"Você receberá mais informações por email quando o sorteio for realizado."}),e.jsx(x,{onClick:()=>h("/"),className:"mt-4 w-full h-11 bg-blue-600 hover:bg-blue-700 text-white font-medium transition-all duration-300",children:"Voltar para Home"})]}):e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Nome"}),e.jsx(p,{type:"text",value:n,onChange:r=>f(r.target.value),className:"bg-[#1A2038] border-[#252B45] text-white h-11",placeholder:"Digite seu nome",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm text-gray-400",children:"Email"}),e.jsx(p,{type:"email",value:o,onChange:r=>g(r.target.value),className:"bg-[#1A2038] border-[#252B45] text-white h-11",placeholder:"Digite seu email",required:!0})]})]}),m&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/20 rounded-lg",children:e.jsx("p",{className:"text-red-500 text-sm text-center",children:m})}),e.jsx(x,{type:"submit",className:"w-full h-11 bg-blue-600 hover:bg-blue-700 text-white font-medium transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed",disabled:c,children:c?"Registrando...":"Participar do Sorteio"})]})})]})]})})}export{T as default};
